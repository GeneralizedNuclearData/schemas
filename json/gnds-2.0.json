{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http:/github.com/generalizednucleardata/schemas/blob/master/json/gnds-2.0.json",
  "type": "object",
  "version": 2.0,
  "title": "GNDS JSON schema",
  "description": "Schema for a GNDS JSON object",
  "properties":{
    "axes": {"$ref": "#/definitions/axes" }
  },
  "required": [ "axes" ],
  "definitions": {
    "axes": {
      "description": "Mechanism for providing label an unit for every axis.",
      "type": "array",
      "oneOf": [
        {
          "items": { "$ref": "#/definitions/axis" }
        },
        {
          "items": { "$ref": "#/definitions/grid" }
        }
      ]
    },
    "axis": {
      "description": "label and unit for each axis",
      "type": "object",
      "properties": {
        "label": {
          "type": "string",
          "attribute": true
        },
        "unit": {
          "type": "string",
          "attribute": true
        }
      },
      "required": [ "label" ],
      "additionalProperties": false
    },
    "crossSection": {
      "properties": {
        "eval": { 
          "anyOf": [
            { "$ref": "#definitions/XYs1d" },
            { "$ref": "#definitions/regions1d" },
            { "$ref": "#definitions/urrProbabilityTable" },
            { "$ref": "#definitions/resonanceRegionLink" }
          ]
        },
        "documentation": { "$ref": "#/definitions/documentation" }
      },
      "required": [ "eval" ],
      "additionalProperties": {
        "anyOf": [
          { "$ref": "#definitions/XYs1d" },
          { "$ref": "#definitions/regions1d" },
          { "$ref": "#definitions/urrProbabilityTable" },
          { "$ref": "#definitions/resonanceRegionLink" }
        ]
      }
    },
    "functional": {
      "description": "Functional node (container).",
      "type": "object",
      "properties": {
        "value": {
          "type": "number",
          "attribute": true
        },
        "valueType": {
          "type": "string",
          "enum": [ "Float64", "Integer64", "Integer32", "UInteger32", "Fraction32" ],
          "default": "Float64",
          "attribute": true
        }
      }
    },
    "grid": {
      "description": "grid axis",
      "type": "object",
      "properties": {
        "interpolation": {
          "type": "string",
          "attribute": true
        },
        "style": {
          "type": "string",
          "enum": [ "none", "points", "boundaries", "parameters" ],
          "default": "none",
          "attribute": true
        },
        "label": {
          "type": "string",
          "attribute": true
        },
        "unit": {
          "type": "string",
          "attribute": true
        },
        "grid": { "$ref": "#/definitions/values" }
      },
      "required": [ "label", "grid" ],
      "additionalProperties": false
    },
    "reaction": {
      "description": "A single reaction",
      "type": "object",
      "allOf": [
        {
          "properties": {
            "ENDF_MT": {
              "type": "integer",
              "attribute": true
            },
            "label": {
              "type": "string",
              "attribute": true
            },
            "fissionGenre": {
              "type": "string",
              "attribute": true
            }
          },
          "required": [ "label", "ENDF_MT" ]
        },
        { "$ref": "#/definitions/crossSection" },
        { "$ref": "#/definitions/doubleDifferentialCrossSection" },
        { "$ref": "#/definitions/outputChannel" }
      ]
    },
    "reactions": {
      "type": "object",
      "patternProperties": {
        ".*": { "$ref": "#/definitions/reaction" }
      }
    },
    "resonanceRegionLink": {
      "type": "object"
    },
    "regions1d": {
      "description": "A region",
      "type": "object",
      "allOf": [
        {
          "properties": {
            "XYs1d": { "$ref": "#/definitions/XYs1d" }
          }
        }
      ]
    },
    "text": {
      "description": "Store a sequence of characters",
      "type": "object",
      "properties": {
        "encoding": {
          "type": "string",
          "enum": [ "ascii", "utf8" ],
          "default": "ascii",
          "atrribute": true
        },
        "markup": {
          "type": "string",
          "enum": [ "none", "xml", "xhtml", "latex" ],
          "default": "none",
          "attribute": true
        },
        "text": {
          "type": "string"
        }
      }
    },
    "urrProbabilityTable": {
      "type": "object"
    },
    "values": {
      "description": "Store a sequence of numerical values",
      "type": "object",
      "properties": {
        "valueType":{
          "type": "string",
          "enum": [ "Float64", "Integer64", "Integer32", "UInteger32", "Fraction32" ],
          "default": "Float64",
          "attribute": true
        },
        "start": {
          "type": "integer",
          "minimum": 0,
          "default": 0,
          "atrribute": true
        },
        "size": {
          "type": "integer",
          "minimum": 0,
          "default": 0,
          "atrribute": true
        },
        "values":{
          "type": "array",
          "items": { "type": "integer" }
        }
      },
      "required": [ "values" ],
      "additionalProperties": false
    },
    "XYs1d": {
      "description": "A tabulated uni-variate functional",
      "type": "object",
      "allOf": [
        { 
          "properties":{
            "interpolation": {
              "type": "string",
              "enum": [ "lin-lin", "lin-log", "log-log", "flat" ],
              "default": "lin-lin",
              "attribute": true
            },
            "pairs": { "$ref": "#/definitions/values" },
            "axes": { "$ref": "#/definitions/axes" }
          } ,
          "required": [ "pairs" ],
          "additionalProperties": false
        },
        { "$ref": "#/definitions/functional" }
      ]
    }
  }
}
